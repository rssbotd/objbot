#!/usr/bin/env python3
# This file is placed in the Public Domain.
# pylint: disable=C0413,W0611


"prompt"


import os
import readline
import sys
import termios


sys.path.insert(0, os.getcwd())


from objx  import Default, fmt


from objw.workdir import Workdir
from objt.errors  import errors
from objz.client  import Client, command
from objz.command import Commands
from objz.event   import Event
from objz.parse   import parse
from objz.utils   import forever, modnames, wrap


from objbot.config  import Config
from objbot.modules import face


Cfg = Config()
Cfg.mod = ",".join(modnames(face))


Workdir.wdr = Cfg.wdr


def main():
    "main"
    parse(Cfg, " ".join(sys.argv[1:]))
    clt = Client()
    if Cfg.txt:
        evt = Event()
        evt.txt = Cfg.otxt
        command(clt, evt)
        for text in evt.result:
            print(text)


if __name__ == "__main__":
    wrap(main)
    errors(print)
